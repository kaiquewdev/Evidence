function(h){function i(){j.extend.apply(j,arguments)}function r(a,c){function b(){}b.prototype=c.prototype;a.prototype=new b;return a.prototype.constructor=a}function E(a,c){"setTimeout"in h?window.setTimeout(function(){a.call(c)},10):a.call(c)}function u(a){this.message=a}function v(a,c,b){this.message=a;this.template=c||"";this.args=b}function z(a,c,b){this.message=a.replace(/%/g,"%%");this.template=c||"";this.args=b}function j(a){this.name=this._methodName=a}function s(a,c){this.name=a;this._tests=
[];c&&this.push.apply(this,c)}function w(){}function x(){}function k(){this.logger=h.console&&h.console.log?g:Object.prototype.toString.call(h.environment)==="[object Environment]"&&h.print?n:o;this.autoRun=!0;this.verbosity=g.INFO;this.runner=p}function l(){this.skipCount=this.assertionCount=this.testCount=0;this.skips=[];this.failureCount=0;this.failures=[];this.errors=[];this.testCount=this.errorCount=0}function g(a){if(typeof a!=="undefined")this.level=a}function o(a){g.call(this,a)}function n(a){g.call(this,
a)}function p(a){this.logger=a}function t(a){l.call(this);this.logger=a}var F=h.Evidence,B=h.onload;i.noConflict=function(){h.Evidence=F;return i};i.VERSION="0.6";var C=/.*?\/(\w+\.html)(.*)/;u.displayName="AssertionSkippedError";u.prototype.name="AssertionSkippedError";i.AssertionSkippedError=u;v.displayName="AssertionFailedError";v.prototype.name="AssertionFailedError";i.AssertionFailedError=v;z.displayName="AssertionMessage";(function(a){a.toString=function(){return y.printf(this.message+this.template,
this.args)}})(z.prototype);i.AssertionMessage=z;var D=function(){function a(b){this._assertExpression(!1,b||"Flunked!")}function c(b,a){this._assertExpression(!b,a||"Failed refutation.","Expected %o to evaluate to false.",b)}return{_assertExpression:function(b,a,c){if(b)this.addAssertion();else{var e=Array.prototype.slice.call(arguments,3);throw new v(a,c,e);}},skip:function(b){throw new u(b||"Skipped!");},assert:function(b,a){this._assertExpression(!!b,a||"Failed assertion.","Expected %o to evaluate to true.",
b)},refute:c,assertNot:c,assertTrue:function(b,a){this._assertExpression(b===!0,a||"Failed assertion.","Expected %o to be true.",b)},assertNull:function(b,a){this._assertExpression(b===null,a||"Failed assertion.","Expected %o to be null.",b)},assertUndefined:function(b,a){this._assertExpression(typeof b==="undefined",a||"Failed assertion.","Expected %o to be undefined.",b)},assertFalse:function(b,a){this._assertExpression(b===!1,a||"Failed assertion.","Expected %o to be false.",b)},assertIdentical:function(b,
a,c){this._assertExpression(b===a,c||"Failed assertion.","Expected %o to be === to %o.",a,b)},refuteIdentical:function(b,a,c){this._assertExpression(b!==a,c||"Failed refutation.","Expected %o to be !== to %o.",a,b)},assertEqual:function(b,a,c){this._assertExpression(b==a,c||"Failed assertion.","Expected %o to be == to %o.",a,b)},refuteEqual:function(b,a,c){this._assertExpression(b!=a,c||"Failed refutation.","Expected %o to be != to %o.",a,b)},assertIn:function(b,a,c){this._assertExpression(b in a,
c||"Failed assertion.",'Expected "%s" to be a property of %o.',b,a)},refuteIn:function(b,a,c){this._assertExpression(!(b in a),c||"Failed refutation.",'Expected "%s" to not be a property of %o.',b,a)},fail:a,flunk:a}}();i.Assertions=D;(function(){function a(b,c){function f(b){j.call(this,b)}c||(c=b,b=(h.location||"").toString().replace(C,"$1"));r(f,this);f.displayName=b;f.extend=a;for(var e in c)f.prototype[e]=c[e];j.subclasses.push(f);return f}function c(){}c.prototype=D;j.prototype=new c;j.constructor=
j;j.displayName="TestCase";j.extend=a;j.subclasses=[];j.defaultTimeout=1E4})();(function(a){a.run=function(a){if(a)this._result=a;try{this._nextAssertions?(this._result.restartTest(this),this._nextAssertions(this)):(this._result.startTest(this),this.setUp(this),this[this._methodName](this))}catch(b){this._filterException(b)}finally{if(this._paused)this._result.pauseTest(this);else try{this.tearDown(this)}catch(d){this._filterException(d)}finally{this._nextAssertions=null,this._result.stopTest(this),
E(function(){this.parent.next()},this)}}};a.addAssertion=function(){this._result.addAssertion()};a._filterException=function(a){switch(a.name){case "AssertionFailedError":this._result.addFailure(this,a);break;case "AssertionSkippedError":this._result.addSkip(this,a);break;default:this._result.addError(this,a)}};a.pause=function(a){this._paused=!0;var b=this;if(a)this._nextAssertions=a;b._timeoutId=h.setTimeout(function(){b.resume(function(){b.fail("Test timed out. Testing was not resumed after being paused.")})},
j.defaultTimeout)};a.resume=function(a){if(this._paused){this._paused=!1;h.clearTimeout(this._timeoutId);if(a)this._nextAssertions=a;this.run()}};a.size=function(){return 1};a.toString=function(){return this.constructor.displayName+"#"+this.name};a.setUp=function(){};a.tearDown=function(){}})(j.prototype);i.TestCase=j;s.displayName="TestSuite";(function(a){a.run=function(a){this._index=0;this._result=a;a.startSuite(this);this.next();return a};a.next=function(){var a=this._tests[this._index];a?(this._index++,
a.run(this._result)):(this._result.stopSuite(this),this.parent?this.parent.next():this._result.stop(new Date))};a.push=function(){for(var a=0,b=arguments.length;a<b;a++){var d=arguments[a];d.parent=this;this._tests.push(d)}};a.size=function(){for(var a=this._tests,b=a.length,d=0,f=0;f<b;f++)d+=a[f].size();return d};a.isEmpty=function(){return this.size()===0};a.toString=function(){return this.name}})(s.prototype);i.TestSuite=s;w.displayName="TestRunner";(function(a){a.run=function(a){a.parent=null;
var b=this._makeResult();b.start(new Date);a.run(b);return b};a._makeResult=function(){return new l}})(w.prototype);i.TestRunner=w;x.displayName="TestLoader";(function(a){function c(a){for(var c=new s((h.location||"").toString().replace(C,"$1")),f=0;f<a.length;f++){var e=A.loadTestsFromTestCase(a[f]);e.isEmpty()||c.push(e)}return c}a.loadTestsFromTestCase=function(a){for(var c=new s(a.displayName),f=this.getTestCaseNames(a),e=0;e<f.length;e++)c.push(new a(f[e]));return c};a.loadRegisteredTestCases=
function(){return c(j.subclasses)};a.loadTestsFromTestCases=c;a.testMethodPrefix="test";a.getTestCaseNames=function(a){var c=[],a=a.prototype,f=this.testMethodPrefix,e;for(e in a)e.indexOf(f)===0&&c.push(e);return c.sort()}})(x.prototype);i.TestLoader=x;(function(){k.run=function(a){var c=new this,a=a||c.retrieveOptions();c.processOptions(a);c.autoRun&&c.run()};k.displayName="AutoRunner";k.LOGGERS={console:g,popup:o,command_line:n};k.RUNNERS={console:p}})();(function(a){a.run=function(){var a=new this.runner(new this.logger(this.verbosity)),
b=A.loadRegisteredTestCases();b._tests.length<=1&&(b=b._tests[0]);return a.run(b)};a.processQueryString=function(a){var b={},a=(a=(a+"").match(/^(?:[^?#]*\?)([^#]+?)(?:#.*)?$/))&&a[1];if(!a)return b;var a=a.split("&"),d=a.length;if(!d)return b;for(var f=0;f<d;f++){var e=a[f].split("="),g=decodeURIComponent(e[0]),e=(e=e[1])?decodeURIComponent(e):!0;b[g]=e}return b};a.processArguments=function(a){for(var b={},d=0;d<a.length;d++){var f=a[d];if(f.indexOf("-")===0){var e=a[d+1];e&&e.indexOf("-")!==0?d++:
e=!0;b[f.substr(1)]=e}}return b};a.retrieveOptions=function(){if(h.location)return this.processQueryString(h.location);if(h.arguments)return this.processArguments(h.arguments);return{}};a.processOptions=function(a){for(var b in a){var d=a[b];switch(b){case "timeout":j.defaultTimeout=h.parseFloat(d)*1E3;break;case "run":this.autoRun=d==="false"?!1:!0;break;case "logger":this.logger=k.LOGGERS[d];break;case "verbosity":var f=h.parseInt(d);this.verbosity=h.isNaN(f)?g[d]:f;break;case "runner":this.runner=
k.RUNNERS[d]}}}})(k.prototype);i.AutoRunner=k;l.displayName="TestResult";(function(a){a.addAssertion=function(){this.assertionCount++};a.addSkip=function(a,b){this.skipCount++;this.skips.push(b)};a.addFailure=function(a,b){this.failureCount++;this.failures.push(b)};a.addError=function(a,b){this.errorCount++;this.errors.push(b)};a.startTest=function(){this.testCount++};a.stopTest=function(){};a.pauseTest=function(){};a.restartTest=function(){};a.startSuite=function(){};a.stopSuite=function(){};a.start=
function(a){this.t0=a};a.stop=function(a){this.t1=a};a.toString=function(){return this.testCount+" tests, "+this.assertionCount+" assertions, "+this.failureCount+" failures, "+this.errorCount+" errors, "+this.skipCount+" skips"}})(l.prototype);i.TestResult=l;var q={};g.displayName="Logger";g.LEVELS=["NOTSET","DEBUG","INFO","WARN","ERROR","CRITICAL"];g.CRITICAL=5;g.ERROR=4;g.WARN=3;g.INFO=2;g.DEBUG=1;g.NOTSET=0;(function(a){a.log=function(a,b,d){var a=a||g.NOTSET,f=h.console,e=g.LEVELS[a].toLowerCase();
e==="critical"&&(e="error");e=e in f?e:"log";if(a>=this.level)if(d)d=d.slice(0),d.unshift(b),f[e].apply(f,d);else f[e](b)};a.critical=function(a,b){this.log(g.CRITICAL,a,b)};a.error=function(a,b){this.log(g.ERROR,a,b)};a.warn=function(a,b){this.log(g.WARN,a,b)};a.info=function(a,b){this.log(g.INFO,a,b)};a.debug=function(a,b){this.log(g.DEBUG,a,b)};a.level=0})(g.prototype);q.Logger=g;r(o,g);o.displayName="PopupLogger";(function(a){var c={WARN:"color: #000; background-color: #fc6;",ERROR:"color: #f00; background-color: #fcc;",
CRITICAL:"color: #fff; background-color: #000;"};a.log=function(a,c,f){a=a||g.NOTSET;a>=this.level&&(f&&(c=y.printf(c,f)),this._appendLine(a,c))};a._makePopup=function(){var a=h.open("","popup","height=400,width=400"),c=a.document;c.write('<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Console</title></head><body><div id="evidence_console"></div></body></html>');c.close();a.focus();return a};a._appendLine=function(a,d){this.popup=this.popup||this._makePopup();var f=g.LEVELS[a],
e='<div style="';e+="color: #333; background-color: #fff; font-family: monospace; border-bottom: 1px solid #ccc;";e+=c[f]||"";e+='">';a>g.INFO&&(e+='<span style="font-weight: bold;">',e+=f,e+=":</span> ");e+=d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/[\n\r]+/,"<br />");e+="</div>";var f=this.popup.document,h=f.createElement("div");h.innerHTML=e;e=h.firstChild;f.getElementById("evidence_console").appendChild(e)}})(o.prototype);q.PopupLogger=o;r(n,g);n.displayName="CommandLineLogger";
(function(a){a.log=function(a,b,d){a=a||g.NOTSET;if(a>=this.level){var f="";a>g.INFO&&(f=g.LEVELS[a]+": ");d&&(b=y.printf(b,d));h.print(f+b)}}})(n.prototype);q.CommandLineLogger=n;r(p,w);p.displayName="ConsoleTestRunner";(function(a){a._makeResult=function(){return new t(this.logger)}})(p.prototype);q.TestRunner=p;r(t,l);t.displayName="ConsoleTestResult";(function(a){var c=l.prototype;a.addAssertion=function(){this.assertionCount++};a.addSkip=function(a,d){c.addSkip.call(this,a,d);this.logger.warn("Skipping testcase "+
a+": "+d.message)};a.addFailure=function(a,d){c.addFailure.call(this,a,d);this.logger.error(a+": "+d.message+" "+d.template,d.args)};a.addError=function(a,d){c.addError.call(this,a,d);this.logger.error(a+" threw an error. "+d)};a.startTest=function(a){c.startTest.call(this,a);this.logger.debug("Started testcase "+a+".")};a.stopTest=function(a){this.logger.debug("Completed testcase "+a+".")};a.pauseTest=function(a){this.logger.info("Paused testcase "+a+".")};a.restartTest=function(a){this.logger.info("Restarted testcase "+
a+".")};a.startSuite=function(a){this.logger.info("Started suite "+a+".")};a.stopSuite=function(a){this.logger.info("Completed suite "+a+".")};a.start=function(a){c.start.call(this,a);this.logger.info("Started tests.")};a.stop=function(a){c.stop.call(this,a);this.logger.info("Completed tests in "+(a-this.t0)/1E3+"s.");this.logger.info(this.toString()+".")}})(t.prototype);q.TestResult=t;var y=function(){return{printf:function(a,c,b){var d=[],f=/(^%|.%)([a-zA-Z])/,c=c.splice(0),b=b||String;if(a.length<=
0)return"";for(;m=f.exec(a);){var e=m[0],g=m.index,h,i;e.indexOf("%%")===0?(d.push(a.substr(0,g)),d.push(e.substr(1))):(d.push(a.substr(0,e.indexOf("%"===0)?g+1:g)),h=m[2],i=c.shift(),i=b(i,h),d.push(i));a=a.substr(g+e.length)}d.push(a);return d.join("")},Console:q}}();i.UI=y;var A=new x;i.defaultLoader=A;h.Evidence=i;if(h.location)h.onload=function(){typeof B==="function"&&B.call(h);k.run()};else if(h.arguments){var G=java.lang.Runtime.getRuntime(),H=new java.lang.Thread(function(){k.run()});G.addShutdownHook(H)}})(this);